<header role="banner" id="header">
    <nav class="navbar navbar-light navbar-expand-md py-4" role="navigation">
        <div class="navbar-inner container">
            <a class="navbar-brand" href="{{ site.url }}">
                {% if site.logo %}
                {{ site.logo | asset_url : 'R360x50' | image_tag }}
                {% else %}
                <img src="https://cloud.modyocdn.com/uploads/a22fe27f-d56b-4845-8532-00183acdc250/original/minimal.png"
                     alt="minimal"/>
                {% endif %}
                <h1 class="sr-only">{{ site.name }}</h1>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu"
                    aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbar-menu">
                {% snippet 'shared/general/menu' %}
                <div class="session-bar ml-2 pl-1 border-left">
                    {% if user %}
                    <div class="dropdown">
                        <a href="#" class="btn dropdown-toggle" data-toggle="dropdown">{{user.name}}
                            {%if user.unread_notifications_count > 0 %}
                            <span class="ml-1 badge badge-primary notifications-badge">
                                    {{user.unread_notifications_count}}
                                </span>
                            {% endif %}
                        </a>
                        <div class="dropdown-menu dropdown-menu-right border p-0">
                            {%if user.unread_notifications_count == 0 %}
                            <p class="text-muted p-3 text-center mb-0">No new notifications</p>
                            {% else %}
                            {% for notification in user.unread_notifications %}
                            <a class="dropdown-item" href="{{ notification.url}}">{{ notification.subject}}</a>
                            {% endfor %}
                            {% endif %}
                            <div class="p-2 border-top text-right d-flex justify-content-between">
                                <a href="{{ site.url }}/profile">Profile</a>
                                <a href="{{ site.url }}/logout">Logout</a>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <a href="{{ site.url }}/login" class="btn btn-link">Sign in</a>
                </div>
                {% endif %}
            </div>
        </div>
    </nav>
</header>

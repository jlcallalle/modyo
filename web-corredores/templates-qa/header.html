<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
	{% snippet "right_drawer_js" %}
</script>
<script>
	{% snippet "session_controller_js" %}
</script>
{% snippet "session_controller_modal_html" %}


 {% assign rol =  user.custom_fields._ucf_perfilusuario  | replace: "[", "" | replace: "]", ""  | replace: '"', "" | replace: ' ', ""  %}


{% if rol contains "EJECUTIVO_CNS" or rol contains "ADM_CNS_CORR"%}
{% assign class = "adminCNS" %}
{% else %}
{% assign class = "" %}
{% endif %}


<header id="header" class="header {{class}}">
	<div class="container-corp mx-auto h-100 flex-centered-separated">
		<a href="{{ site.url }}" class="link-logo">
			{% if site.logo %}
			<svg width="206" height="72" viewBox="0 0 206 72" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M58.9172 42.0606C56.2237 42.0606 54.1766 41.3076 52.7759 39.8196C51.3753 38.3315 50.657 36.216 50.657 33.4551C50.657 32.0925 50.8725 30.8734 51.3034 29.7977C51.7344 28.722 52.327 27.8256 53.0632 27.0905C53.8174 26.3554 54.6973 25.7997 55.7388 25.4052C56.7803 25.0288 57.8937 24.8315 59.0968 24.8315C59.7971 24.8315 60.4256 24.8853 61.0002 24.9929C61.5748 25.1005 62.0776 25.208 62.5086 25.3515C62.9396 25.4949 63.2987 25.6204 63.586 25.7638C63.8733 25.9072 64.0709 26.0148 64.2145 26.1045L63.1371 29.0985C62.6343 28.8296 62.0417 28.5965 61.3594 28.3993C60.677 28.2021 59.9228 28.1124 59.0609 28.1124C58.4862 28.1124 57.9296 28.2021 57.3729 28.3993C56.8162 28.5965 56.3314 28.9013 55.9184 29.3136C55.5054 29.726 55.1642 30.2817 54.9128 30.9451C54.6614 31.6084 54.5357 32.4152 54.5357 33.3654C54.5357 34.1363 54.6255 34.8355 54.7871 35.4989C54.9487 36.1622 55.2181 36.718 55.5952 37.2021C55.9723 37.6861 56.4571 38.0626 57.0676 38.3315C57.6782 38.6184 58.3965 38.7439 59.2584 38.7439C59.7971 38.7439 60.2819 38.708 60.7129 38.6543C61.1439 38.5825 61.521 38.5108 61.8622 38.4212C62.2033 38.3315 62.4906 38.2419 62.742 38.1164C62.9934 38.0088 63.2269 37.9013 63.4424 37.8116L64.4659 40.7877C63.9452 41.1104 63.2089 41.3973 62.2393 41.6483C61.2696 41.8993 60.1742 42.0606 58.9172 42.0606Z" fill="#003DA5"/>
				<path d="M81.9203 33.4542C81.9203 34.8705 81.7048 36.1076 81.2918 37.1833C80.8788 38.259 80.2862 39.1554 79.5679 39.8725C78.8317 40.5896 77.9698 41.1454 76.9642 41.504C75.9586 41.8626 74.8632 42.0598 73.7139 42.0598C72.5826 42.0598 71.5232 41.8805 70.5176 41.504C69.512 41.1454 68.6321 40.5896 67.8959 39.8725C67.1417 39.1554 66.567 38.259 66.1361 37.1833C65.7051 36.1076 65.4896 34.8705 65.4896 33.4542C65.4896 32.0378 65.7051 30.8008 66.154 29.7251C66.603 28.6494 67.1955 27.753 67.9497 27.0179C68.7039 26.2829 69.5838 25.745 70.5715 25.3685C71.5591 25.01 72.6186 24.8127 73.7139 24.8127C74.8452 24.8127 75.9047 24.992 76.9103 25.3685C77.9159 25.7271 78.7778 26.2829 79.532 27.0179C80.2862 27.753 80.8608 28.6494 81.2918 29.7251C81.7048 30.8008 81.9203 32.0558 81.9203 33.4542ZM69.2965 33.4542C69.2965 34.261 69.4043 34.996 69.6018 35.6414C69.7993 36.2869 70.0866 36.8606 70.4637 37.3267C70.8408 37.7928 71.2897 38.1514 71.8284 38.4024C72.3672 38.6534 72.9957 38.7789 73.696 38.7789C74.3783 38.7789 74.9889 38.6534 75.5456 38.4024C76.1022 38.1514 76.5511 37.7928 76.9282 37.3267C77.3053 36.8606 77.5927 36.3048 77.7902 35.6414C77.9877 34.996 78.0954 34.261 78.0954 33.4542C78.0954 32.6474 77.9877 31.9124 77.7902 31.249C77.5927 30.5857 77.3053 30.0299 76.9282 29.5637C76.5511 29.0976 76.1022 28.739 75.5456 28.488C74.9889 28.237 74.3783 28.1116 73.696 28.1116C72.9957 28.1116 72.3672 28.237 71.8284 28.506C71.2897 28.7749 70.8229 29.1335 70.4637 29.5996C70.0866 30.0657 69.7993 30.6394 69.6018 31.2849C69.4043 31.9482 69.2965 32.6653 69.2965 33.4542Z" fill="#003DA5"/>
				<path d="M96.0523 41.719C94.9928 39.8365 93.8256 37.972 92.5866 36.1254C91.3475 34.2787 90.0187 32.5397 88.6181 30.9082V41.719H84.9369V25.207H87.9896C88.5103 25.727 89.1029 26.3724 89.7314 27.1433C90.3599 27.9142 91.0243 28.721 91.6708 29.5815C92.3352 30.4421 92.9816 31.3385 93.646 32.2708C94.2925 33.203 94.903 34.0995 95.4776 34.9421V25.207H99.1768V41.719H96.0523Z" fill="#003DA5"/>
				<path d="M107.204 38.8863C107.724 38.8863 108.155 38.8505 108.496 38.7608C108.838 38.6712 109.107 38.5457 109.322 38.4023C109.538 38.2589 109.664 38.0796 109.753 37.8644C109.825 37.6672 109.879 37.4342 109.879 37.1652C109.879 36.6274 109.628 36.1792 109.107 35.8206C108.604 35.462 107.724 35.0855 106.485 34.6732C105.947 34.476 105.408 34.2608 104.869 34.0098C104.33 33.7589 103.846 33.4541 103.415 33.0776C102.984 32.7011 102.642 32.2529 102.373 31.715C102.104 31.1772 101.96 30.5318 101.96 29.7788C101.96 29.0258 102.104 28.3266 102.391 27.717C102.678 27.1075 103.091 26.5875 103.612 26.1573C104.133 25.727 104.779 25.4043 105.516 25.1712C106.27 24.9381 107.114 24.8306 108.047 24.8306C109.161 24.8306 110.131 24.9561 110.939 25.1891C111.747 25.4222 112.411 25.6911 112.95 25.978L111.872 28.9003C111.405 28.6672 110.903 28.4521 110.328 28.2728C109.771 28.0935 109.089 28.0039 108.281 28.0039C107.383 28.0039 106.755 28.1294 106.36 28.3804C105.964 28.6314 105.767 29.0079 105.767 29.5099C105.767 29.8146 105.839 30.0656 105.982 30.2808C106.126 30.4959 106.324 30.6752 106.593 30.8365C106.862 30.9979 107.15 31.1593 107.491 31.2847C107.832 31.4282 108.209 31.5537 108.622 31.6971C109.484 32.0198 110.22 32.3246 110.867 32.6294C111.495 32.9342 112.034 33.2927 112.447 33.7051C112.86 34.1174 113.183 34.6015 113.381 35.1573C113.596 35.713 113.686 36.3943 113.686 37.1832C113.686 38.725 113.147 39.9262 112.07 40.7688C110.992 41.6114 109.358 42.0417 107.186 42.0417C106.449 42.0417 105.785 42.0059 105.21 41.9162C104.618 41.8266 104.097 41.719 103.648 41.5935C103.199 41.468 102.804 41.3246 102.481 41.1812C102.158 41.0377 101.888 40.9122 101.655 40.7688L102.696 37.8106C103.181 38.0796 103.792 38.3306 104.528 38.5457C105.264 38.7788 106.162 38.8863 107.204 38.8863Z" fill="#003DA5"/>
				<path d="M132.074 33.4542C132.074 34.8705 131.858 36.1076 131.445 37.1833C131.032 38.259 130.44 39.1554 129.722 39.8725C128.985 40.5896 128.123 41.1454 127.118 41.504C126.112 41.8626 125.017 42.0598 123.868 42.0598C122.736 42.0598 121.677 41.8805 120.671 41.504C119.666 41.1454 118.786 40.5896 118.05 39.8725C117.295 39.1554 116.721 38.259 116.29 37.1833C115.859 36.1076 115.643 34.8705 115.643 33.4542C115.643 32.0378 115.859 30.8008 116.308 29.7251C116.757 28.6494 117.349 27.753 118.103 27.0179C118.858 26.2829 119.738 25.745 120.725 25.3685C121.713 25.01 122.772 24.8127 123.868 24.8127C124.999 24.8127 126.058 24.992 127.064 25.3685C128.07 25.7271 128.931 26.2829 129.686 27.0179C130.44 27.753 131.014 28.6494 131.445 29.7251C131.858 30.8008 132.074 32.0558 132.074 33.4542ZM119.468 33.4542C119.468 34.261 119.576 34.996 119.773 35.6414C119.971 36.2869 120.258 36.8606 120.635 37.3267C121.012 37.7928 121.461 38.1514 122 38.4024C122.539 38.6534 123.167 38.7789 123.868 38.7789C124.55 38.7789 125.161 38.6534 125.717 38.4024C126.274 38.1514 126.723 37.7928 127.1 37.3267C127.477 36.8606 127.764 36.3048 127.962 35.6414C128.159 34.996 128.267 34.261 128.267 33.4542C128.267 32.6474 128.159 31.9124 127.962 31.249C127.764 30.5857 127.477 30.0299 127.1 29.5637C126.723 29.0976 126.274 28.739 125.717 28.488C125.161 28.237 124.55 28.1116 123.868 28.1116C123.167 28.1116 122.539 28.237 122 28.506C121.461 28.7749 120.994 29.1335 120.635 29.5996C120.258 30.0657 119.971 30.6394 119.773 31.2849C119.558 31.9482 119.468 32.6653 119.468 33.4542Z" fill="#003DA5"/>
				<path d="M139.813 25.0278C142.291 25.0278 144.195 25.476 145.506 26.3545C146.817 27.233 147.481 28.6135 147.481 30.4601C147.481 31.6254 147.212 32.5577 146.673 33.2748C146.134 33.992 145.38 34.5657 144.374 34.978C144.716 35.3904 145.057 35.8565 145.416 36.3944C145.775 36.9322 146.152 37.488 146.493 38.0617C146.852 38.6354 147.194 39.245 147.535 39.8725C147.876 40.4999 148.181 41.1095 148.469 41.7191H144.303C143.997 41.1812 143.692 40.6254 143.387 40.0697C143.082 39.5139 142.758 38.976 142.435 38.4561C142.112 37.9362 141.789 37.4342 141.465 36.9681C141.142 36.5019 140.819 36.0717 140.514 35.6952H138.682V41.7191H134.965V25.4581C135.773 25.2968 136.617 25.1892 137.479 25.1175C138.359 25.0637 139.131 25.0278 139.813 25.0278ZM140.029 28.2011C139.759 28.2011 139.508 28.2011 139.293 28.2191C139.077 28.237 138.88 28.2549 138.682 28.2729V32.7549H139.724C141.124 32.7549 142.13 32.5756 142.722 32.235C143.333 31.8944 143.62 31.2848 143.62 30.4422C143.62 29.6354 143.315 29.0617 142.704 28.7211C142.13 28.3625 141.232 28.2011 140.029 28.2011Z" fill="#003DA5"/>
				<path d="M157.591 42.0597C154.897 42.0597 152.85 41.3067 151.45 39.8186C150.049 38.3306 149.331 36.215 149.331 33.4541C149.331 32.0915 149.546 30.8724 149.977 29.7967C150.408 28.721 151.001 27.8246 151.737 27.0895C152.491 26.3545 153.371 25.7987 154.413 25.4043C155.454 25.0278 156.567 24.8306 157.77 24.8306C158.471 24.8306 159.099 24.8844 159.674 24.9919C160.249 25.0995 160.751 25.2071 161.182 25.3505C161.613 25.4939 161.972 25.6194 162.26 25.7628C162.547 25.9063 162.745 26.0138 162.888 26.1035L161.811 29.0975C161.308 28.8286 160.715 28.5955 160.033 28.3983C159.351 28.2011 158.597 28.1114 157.735 28.1114C157.16 28.1114 156.603 28.2011 156.047 28.3983C155.49 28.5955 155.005 28.9003 154.592 29.3126C154.179 29.725 153.838 30.2808 153.587 30.9441C153.335 31.6075 153.209 32.4142 153.209 33.3644C153.209 34.1353 153.299 34.8346 153.461 35.4979C153.622 36.1612 153.892 36.717 154.269 37.2011C154.646 37.6851 155.131 38.0616 155.741 38.3306C156.352 38.6174 157.07 38.7429 157.932 38.7429C158.471 38.7429 158.956 38.7071 159.387 38.6533C159.818 38.5816 160.195 38.5099 160.536 38.4202C160.877 38.3306 161.164 38.2409 161.416 38.1154C161.667 38.0079 161.901 37.9003 162.116 37.8106L163.14 40.7867C162.619 41.1095 161.883 41.3963 160.913 41.6473C159.943 41.8983 158.848 42.0597 157.591 42.0597Z" fill="#003DA5"/>
				<path d="M165.636 25.2251H169.353V41.737H165.636V25.2251Z" fill="#003DA5"/>
				<path d="M189.034 33.4542C189.034 34.8705 188.818 36.1076 188.405 37.1833C187.992 38.259 187.4 39.1554 186.681 39.8725C185.945 40.5896 185.083 41.1454 184.078 41.504C183.072 41.8626 181.977 42.0598 180.827 42.0598C179.696 42.0598 178.637 41.8805 177.631 41.504C176.625 41.1454 175.746 40.5896 175.009 39.8725C174.255 39.1554 173.68 38.259 173.249 37.1833C172.819 36.1076 172.603 34.8705 172.603 33.4542C172.603 32.0378 172.819 30.8008 173.267 29.7251C173.716 28.6494 174.309 27.753 175.063 27.0179C175.817 26.2829 176.697 25.745 177.685 25.3685C178.673 25.01 179.732 24.8127 180.827 24.8127C181.959 24.8127 183.018 24.992 184.024 25.3685C185.029 25.7271 185.891 26.2829 186.645 27.0179C187.4 27.753 187.974 28.6494 188.405 29.7251C188.818 30.8008 189.034 32.0558 189.034 33.4542ZM176.428 33.4542C176.428 34.261 176.536 34.996 176.733 35.6414C176.931 36.2869 177.218 36.8606 177.595 37.3267C177.972 37.7928 178.421 38.1514 178.96 38.4024C179.499 38.6534 180.127 38.7789 180.827 38.7789C181.51 38.7789 182.12 38.6534 182.677 38.4024C183.234 38.1514 183.683 37.7928 184.06 37.3267C184.437 36.8606 184.724 36.3048 184.922 35.6414C185.119 34.996 185.227 34.261 185.227 33.4542C185.227 32.6474 185.119 31.9124 184.922 31.249C184.724 30.5857 184.437 30.0299 184.06 29.5637C183.683 29.0976 183.234 28.739 182.677 28.488C182.12 28.237 181.51 28.1116 180.827 28.1116C180.127 28.1116 179.499 28.237 178.96 28.506C178.421 28.7749 177.954 29.1335 177.595 29.5996C177.218 30.0657 176.931 30.6394 176.733 31.2849C176.518 31.9482 176.428 32.6653 176.428 33.4542Z" fill="#003DA5"/>
				<path d="M38.2306 27C35.2317 26.8027 30.0781 27.5916 26.8458 29.7071L27.0793 30.5318C27.0793 30.5318 31.353 28.3087 36.5785 28.7569C36.5785 28.7569 36.5426 30.227 36.5246 32.5219C32.197 32.4322 28.4979 33.2211 25.517 35.0139L25.7145 35.7848C25.7145 35.7848 29.9703 33.3286 36.5067 34.2788C36.5067 35.5159 36.5067 36.8426 36.5067 38.1334C34.5853 37.9362 27.8514 38.0617 24.26 40.231L24.4396 41.0378C24.4396 41.0378 30.0242 38.7071 36.5067 39.8545C36.5246 41.1095 36.5785 42.5079 36.6503 43.494L38.2126 43.5657C37.8894 34.5657 38.2665 27.0179 38.2306 27Z" fill="#84BD00"/>
				<path d="M44.1028 22.3386C43.8334 22.3207 43.2588 22.2848 42.4866 22.2669C42.6303 19.5418 42.8637 17.7489 42.8637 17.7489C39.0209 17.3007 34.2264 18.0717 29.6474 20.0438L29.1625 21.6215C33.7236 19.6852 37.7101 19.1653 41.1937 19.2728C41.1937 19.2728 40.9962 20.7071 40.8705 22.2669C37.2791 22.3207 31.5329 22.8585 26.882 25.3147L26.469 26.6234C34.6753 23.1274 42.2173 24.1852 42.2173 24.1852C42.2173 24.1852 41.6786 36.484 43.0433 45.3585L44.6415 45.5557C43.3845 34.6733 44.1028 22.3386 44.1028 22.3386Z" fill="#003DA5"/>
				<path d="M34.6033 46.8105C24.4935 46.8105 18.442 49.2488 16.8617 49.9659L16.4487 51.2926C16.4487 51.2926 22.7157 48.4241 34.6033 48.4241C46.5447 48.4241 52.7398 51.2926 52.7398 51.2926L52.3448 49.9659C50.7825 49.2309 44.7849 46.8105 34.6033 46.8105Z" fill="#003DA5"/>
				<path d="M147.086 53.6234C147.535 53.6234 147.876 53.5516 148.092 53.3903C148.307 53.2289 148.397 53.0138 148.397 52.7269C148.397 52.5656 148.361 52.4222 148.289 52.2967C148.217 52.1712 148.11 52.0636 147.984 51.974C147.858 51.8843 147.697 51.7947 147.499 51.705C147.32 51.6154 147.104 51.5437 146.853 51.454C146.619 51.3644 146.368 51.2747 146.152 51.1672C145.919 51.0596 145.721 50.9341 145.56 50.7728C145.38 50.6114 145.255 50.4321 145.147 50.217C145.039 50.0018 144.985 49.7508 144.985 49.4461C144.985 48.8186 145.201 48.3166 145.65 47.958C146.081 47.5994 146.691 47.4202 147.427 47.4202C147.858 47.4202 148.253 47.4739 148.595 47.5636C148.936 47.6532 149.205 47.7608 149.403 47.8863L149.008 48.9082C148.774 48.7827 148.523 48.6751 148.253 48.6214C147.984 48.5497 147.697 48.5138 147.409 48.5138C147.068 48.5138 146.799 48.5855 146.601 48.7289C146.404 48.8724 146.314 49.0696 146.314 49.3206C146.314 49.4819 146.35 49.6074 146.404 49.715C146.476 49.8226 146.565 49.9301 146.673 50.0198C146.799 50.1094 146.925 50.1811 147.086 50.2528C147.248 50.3245 147.409 50.3963 147.607 50.468C147.93 50.5935 148.235 50.719 148.487 50.8445C148.738 50.97 148.972 51.1134 149.151 51.2927C149.331 51.472 149.474 51.6692 149.564 51.9022C149.654 52.1353 149.708 52.4222 149.708 52.7449C149.708 53.3724 149.492 53.8564 149.043 54.215C148.595 54.5556 147.948 54.7349 147.086 54.7349C146.799 54.7349 146.53 54.717 146.296 54.6811C146.063 54.6453 145.847 54.5915 145.668 54.5377C145.488 54.4839 145.326 54.4301 145.183 54.3763C145.039 54.3226 144.949 54.2688 144.859 54.215L145.237 53.1752C145.416 53.2827 145.668 53.3724 145.973 53.4799C146.278 53.5696 146.655 53.6234 147.086 53.6234Z" fill="#003DA5"/>
				<path d="M150.857 54.5732V47.5991H155.346V48.6748H152.132V50.3959H155.005V51.4537H152.132V53.4975H155.598V54.5732H150.857Z" fill="#003DA5"/>
				<path d="M159.782 48.5494C159.063 48.5494 158.507 48.7645 158.13 49.2128C157.752 49.661 157.555 50.2705 157.555 51.0773C157.555 51.4538 157.609 51.7944 157.699 52.1171C157.788 52.4219 157.932 52.6908 158.094 52.9239C158.273 53.139 158.489 53.3183 158.758 53.4438C159.027 53.5693 159.333 53.6231 159.692 53.6231C159.907 53.6231 160.105 53.6231 160.266 53.6052C160.428 53.5873 160.554 53.5693 160.643 53.5335V51.0235H161.918V54.3761C161.739 54.4478 161.452 54.5195 161.039 54.5912C160.626 54.663 160.141 54.7167 159.602 54.7167C159.099 54.7167 158.632 54.6271 158.219 54.4837C157.806 54.3223 157.447 54.0892 157.16 53.7845C156.873 53.4797 156.639 53.1032 156.477 52.6371C156.316 52.1888 156.244 51.6689 156.244 51.0773C156.244 50.4857 156.334 49.9837 156.513 49.5175C156.693 49.0693 156.944 48.6928 157.25 48.3701C157.555 48.0653 157.914 47.8143 158.345 47.653C158.758 47.4916 159.207 47.4199 159.674 47.4199C159.997 47.4199 160.284 47.4378 160.536 47.4916C160.787 47.5275 161.003 47.5813 161.182 47.6351C161.362 47.6888 161.505 47.7426 161.631 47.8143C161.757 47.8681 161.829 47.9219 161.883 47.9398L161.505 48.9797C161.308 48.8542 161.056 48.7645 160.751 48.6749C160.428 48.5853 160.105 48.5494 159.782 48.5494Z" fill="#003DA5"/>
				<path d="M166.103 54.7168C165.618 54.7168 165.223 54.645 164.864 54.5016C164.523 54.3582 164.235 54.1789 164.02 53.9279C163.786 53.6769 163.625 53.3901 163.517 53.0494C163.409 52.7088 163.355 52.3502 163.355 51.9379V47.5813H164.63V51.8303C164.63 52.153 164.666 52.4219 164.738 52.6371C164.81 52.8701 164.918 53.0494 165.043 53.1929C165.169 53.3363 165.331 53.4438 165.51 53.4976C165.69 53.5693 165.887 53.6052 166.103 53.6052C166.318 53.6052 166.534 53.5693 166.713 53.4976C166.893 53.4259 167.055 53.3184 167.18 53.1929C167.306 53.0494 167.414 52.8701 167.486 52.6371C167.557 52.404 167.593 52.1351 167.593 51.8303V47.5813H168.868V51.9379C168.868 52.3323 168.814 52.7088 168.707 53.0494C168.599 53.3901 168.419 53.6769 168.204 53.9279C167.97 54.1789 167.683 54.3761 167.342 54.5016C166.983 54.645 166.57 54.7168 166.103 54.7168Z" fill="#003DA5"/>
				<path d="M172.424 47.5098C173.429 47.5098 174.202 47.689 174.74 48.0655C175.279 48.442 175.548 48.9978 175.548 49.7508C175.548 50.701 175.081 51.3464 174.148 51.6691C174.273 51.8305 174.417 52.0098 174.579 52.2249C174.74 52.44 174.902 52.691 175.081 52.942C175.261 53.193 175.405 53.462 175.566 53.7309C175.728 53.9998 175.854 54.2687 175.979 54.5377H174.543C174.417 54.3046 174.273 54.0536 174.13 53.8026C173.986 53.5516 173.824 53.3185 173.681 53.0855C173.537 52.8524 173.376 52.6373 173.232 52.4221C173.088 52.2249 172.945 52.0277 172.819 51.8663C172.729 51.8663 172.639 51.8843 172.585 51.8843C172.514 51.8843 172.46 51.8843 172.388 51.8843H171.777V54.5197H170.502V47.689C170.808 47.6173 171.149 47.5815 171.49 47.5456C171.831 47.5277 172.154 47.5098 172.424 47.5098ZM172.514 48.6213C172.244 48.6213 171.993 48.6392 171.759 48.6572V50.9161H172.316C172.621 50.9161 172.891 50.8982 173.142 50.8624C173.376 50.8265 173.573 50.7727 173.735 50.6831C173.896 50.5934 174.004 50.4859 174.094 50.3245C174.166 50.1811 174.22 49.9839 174.22 49.7687C174.22 49.5536 174.184 49.3743 174.094 49.2309C174.022 49.0875 173.896 48.962 173.753 48.8723C173.609 48.7827 173.429 48.7289 173.214 48.693C172.998 48.6392 172.765 48.6213 172.514 48.6213Z" fill="#003DA5"/>
				<path d="M183.359 51.0773C183.359 51.6689 183.27 52.2068 183.09 52.655C182.91 53.1032 182.677 53.4976 182.372 53.8024C182.066 54.1072 181.707 54.3402 181.294 54.4837C180.881 54.645 180.45 54.7167 179.983 54.7167C179.517 54.7167 179.086 54.645 178.673 54.4837C178.26 54.3223 177.9 54.1072 177.595 53.8024C177.29 53.4976 177.039 53.1211 176.859 52.655C176.679 52.1888 176.59 51.6689 176.59 51.0773C176.59 50.4857 176.679 49.9478 176.859 49.4996C177.039 49.0514 177.29 48.657 177.595 48.3522C177.9 48.0474 178.278 47.8143 178.673 47.653C179.068 47.4916 179.517 47.4199 179.966 47.4199C180.414 47.4199 180.863 47.4916 181.258 47.653C181.671 47.8143 182.031 48.0474 182.336 48.3522C182.641 48.657 182.893 49.0335 183.072 49.4996C183.252 49.9657 183.359 50.4677 183.359 51.0773ZM177.9 51.0773C177.9 51.4538 177.954 51.8124 178.044 52.1171C178.134 52.4219 178.278 52.6908 178.457 52.906C178.637 53.1211 178.852 53.3004 179.104 53.408C179.355 53.5335 179.642 53.5873 179.966 53.5873C180.289 53.5873 180.576 53.5335 180.827 53.408C181.079 53.2825 181.294 53.1211 181.474 52.906C181.653 52.6908 181.797 52.4219 181.887 52.1171C181.977 51.8124 182.031 51.4538 182.031 51.0773C182.031 50.7008 181.977 50.3422 181.887 50.0375C181.797 49.7327 181.653 49.4637 181.474 49.2486C181.294 49.0335 181.079 48.8542 180.827 48.7466C180.576 48.6211 180.289 48.5673 179.966 48.5673C179.642 48.5673 179.355 48.6211 179.104 48.7466C178.852 48.8721 178.637 49.0335 178.457 49.2665C178.278 49.4996 178.134 49.7506 178.044 50.0554C177.954 50.3422 177.9 50.6829 177.9 51.0773Z" fill="#003DA5"/>
				<path d="M186.358 53.6231C186.807 53.6231 187.148 53.5514 187.364 53.39C187.579 53.2287 187.669 53.0136 187.669 52.7267C187.669 52.5653 187.633 52.4219 187.561 52.2964C187.489 52.1709 187.382 52.0633 187.256 51.9737C187.13 51.8841 186.969 51.7944 186.771 51.7048C186.591 51.6151 186.376 51.5434 186.125 51.4538C185.891 51.3641 185.64 51.2745 185.424 51.1669C185.191 51.0594 184.993 50.9339 184.832 50.7725C184.652 50.6112 184.526 50.4319 184.419 50.2167C184.311 50.0016 184.257 49.7506 184.257 49.4458C184.257 48.8183 184.473 48.3163 184.921 47.9578C185.352 47.5992 185.963 47.4199 186.699 47.4199C187.13 47.4199 187.525 47.4737 187.866 47.5633C188.208 47.653 188.477 47.7606 188.674 47.8861L188.279 48.908C188.046 48.7825 187.795 48.6749 187.525 48.6211C187.256 48.5494 186.969 48.5135 186.681 48.5135C186.34 48.5135 186.071 48.5853 185.873 48.7287C185.676 48.8721 185.586 49.0693 185.586 49.3203C185.586 49.4817 185.622 49.6072 185.676 49.7147C185.747 49.8223 185.837 49.9299 185.945 50.0195C186.071 50.1092 186.196 50.1809 186.358 50.2526C186.52 50.3243 186.681 50.396 186.879 50.4677C187.202 50.5932 187.507 50.7187 187.759 50.8442C188.01 50.9697 188.243 51.1132 188.423 51.2924C188.603 51.4717 188.746 51.6689 188.836 51.902C188.926 52.1351 188.98 52.4219 188.98 52.7446C188.98 53.3721 188.764 53.8562 188.315 54.2147C187.866 54.5554 187.22 54.7347 186.358 54.7347C186.071 54.7347 185.801 54.7167 185.568 54.6809C185.334 54.645 185.119 54.5912 184.939 54.5375C184.76 54.4837 184.598 54.4299 184.455 54.3761C184.311 54.3223 184.221 54.2685 184.131 54.2147L184.508 53.1749C184.688 53.2825 184.939 53.3721 185.245 53.4797C185.55 53.5693 185.927 53.6231 186.358 53.6231Z" fill="#003DA5"/>
			</svg>
			{% endif  %}
		</a>
		<button class="btn btn-unstyled btn-ejecutivo" @click="openSlidePanel">
			<span class="pr-4 text-left">
				<span class="d-block c-primary-b font-main-bold">
					<span class="pr-2">{{ user.custom_fields._ucf_nombrecorredor }}</span> {{ 'ebe33c60-aedd-418b-8bc8-472c8cad3d1a' | asset_image }}
				</span>
				<span class="d-block c-primary-b mini-text"><strong>Hola!</strong> {{user.name}}</span>
			</span>
		</button>
	</div>

	{% snippet "right_drawer" %}
</header>

<script>
	var vm = new Vue({
		components: {
			mSlideOutPanel: MDrawer,
		},
		delimiters: ['${', '}'],
		data: function() {
			return {
				admin: true,
				ulogs:true,
				simulacion:true,
				rol: '',
				isCorredor:'',

				axios_api: null,
				baseUrl: 'http://10.15.17.21:9080/PinCotizadorVida-web',
				loading: false,
				propuestasIsCollapsed: false,
			};
		},
		mounted: function() {
			this.isRol('{{ user.custom_fields._ucf_perfilusuario }}');
			this.isCorredor = this.rol.toLowerCase().includes('corr');

			this.axios_api = axios.create({ 
				baseURL: 'https://ip9fi4sqxl.execute-api.us-east-1.amazonaws.com/v1',
				headers: {
					'Content-Type': 'application/json',
					'Accept': 'application/json',
				},
			});

			var axios_auth = axios.create();
			axios_auth.defaults.baseURL = '{{site.baseUrl}}' + '/auth/openidc';
			var injectToken = async function(config) {
				try {
					var response = await axios_auth.get('/access_token');
					var newConfig = config;
					newConfig.headers = {
						Authorization: "Bearer " + response.data.access_token,
						"Accept": "application/json",
						"Content-Type": "application/json",
					};
					return newConfig;
				} catch (error) {
					throw new Error('Unauthorized');
				}
			}

			this.axios_api.interceptors.request.use(injectToken);

		},
		methods: {
			isRol: function( rol ) {
				const self = this;
				const rolLimpio = rol.replace(/["\][\\]/g, '').replace(/&quot;/g,'');
				self.rol = rolLimpio;
				var axios_api = axios.create({ //https://z7iw6n4w8f.execute-api.us-east-1.amazonaws.com/v1
					baseURL: 'https://z7iw6n4w8f.execute-api.us-east-1.amazonaws.com/v1',
					headers: {
						'Content-Type': 'application/json'
					},
				});
				var axios_auth = axios.create();
				axios_auth.defaults.baseURL = '{{site.baseUrl}}' + '/auth/openidc';
				var injectTokenVar = async function injectToken(config) {
					try {
						var response = await axios_auth.get('/access_token');
						var newConfig = config;
						newConfig.headers = {
							Authorization: "Bearer " + response.data.access_token,
							'Content-Type': 'application/json',
						};
						return newConfig;
					} catch (error) {
						throw new Error('Unauthorized');
					}
				};
				axios_api.interceptors.request.use(injectTokenVar);
				axios_api.get('/roles/'+rolLimpio).then(function (response) {
					var permisos = response.data.permisos;
					if(permisos !== undefined) {
						const permiso_admin = permisos.find((per) => per.nombrePermiso === 'mantenedores');
						const permiso_simula = permisos.find((per) => per.nombrePermiso === 'simulacion_vehiculo');
						const permiso_simula_CNS = permisos.find((per) => per.nombrePermiso === 'flujo_vehiculo_cns');
						const permiso_logs = permisos.find((per) => per.nombrePermiso === 'logs');
						self.admin = permiso_admin !== undefined;
						self.simulacion = permiso_simula !== undefined || permiso_simula_CNS !== undefined;
						self.ulogs = permiso_logs !== undefined;
						if(self.simulacion === true){
							if(window.location.href === "{{ site.url }}/logs" || window.location.href === "{{ site.url }}/logs#/" || window.location.href === "{{ site.url }}/mantenedor-categorias-roles#/" || window.location.href === "{{ site.url }}/mantenedor-categorias-roles"){
								window.location.href = "{{ site.url }}/not-found";
							}
						}
						let URLsearch = window.location.search;
						if(self.admin === true){
							if( window.location.href === "{{ site.url }}/panel-productos" || window.location.href === "{{ site.url }}/datos-vehiculo"+URLsearch || window.location.href === "{{ site.url }}/planes"+URLsearch || window.location.href === "{{ site.url }}/datos-personales"+URLsearch || window.location.href === "{{ site.url }}/buscador-simulacion-poliza-vehiculo" || window.location.href === "{{ site.url }}/resultado-buscador-simulacion-poliza-vehiculo"){
								window.location.href = "{{ site.url }}/not-found";
							}
						}
					}
				});
			},
			openSlidePanel: function (){
				this.$refs.slidePanel.openDrawer()
			},

			toggleLoader: function() {
				this.loading = !this.loading;
			},
			getRol: function() {
				const currentRol = '{{ user.custom_fields["_ucf_perfilusuario"] }}';
				this.rolLimpio = currentRol.replace(/["\][\\]/g, '').replace(/&quot;/g,'').toLowerCase();
				if(this.rolLimpio.includes('cns')) return 'PIN_CORR_EJEC_ASIST';
				if(this.rolLimpio.includes('corr')) return 'PIN_CORR_CORREDOR';
			},
			getEncryptedData: function(data){
				return this.axios_api.post('/integracion-crm-ventas/encriptar', { data });
			},
			getUrl: function(item, cotizador){
				this.loading = true;
				var self = this;
				var rol = this.getRol();
				var tipoRol = rol.toLowerCase().includes('corredor') ? 'corredor' : 'asistente';
				var rut = '{{ user.custom_fields['_ucf_rutcorredor'] }}'.replace(/-/g, '');
				var rutAcceso = tipoRol === 'corredor' ? rut.substring(0, rut.length - 1) : rut;

				//Verificar si se tiene acceso
				this.axios_api.get(`/integracion-crm-ventas/${tipoRol}/${rutAcceso}/acceso-pin/`).then(async function (response) {
					if(item == 'buscar-cotizador' || item == 'mantencion' || item == 'traspaso' || cotizador.name != "Otros productos"){
						//Inicializar variables
						var url = '';
						var cmd = '';
						var idSesion = '1';
						var branch = cotizador ? cotizador.branch : '1';
						var modulec = cotizador ? cotizador.modulec : '-1';
						var product = cotizador ? cotizador.product : '';
						var type = '';
						if(!self.isCorredor){
							rut = '0{{ user.custom_fields['_ucf_rutcorredor'] }}'.replace(/-/g, '');
						}
						if(response.data.tieneAcceso) {
							if(item === 'buscar-cotizador') { 
								cmd = 'buscarCotizacion';
								type = 'buscarCotizacion.do';
							}
							else if(item === 'mantencion') { 
								cmd = 'mantenedor'; 
								product = 0; 
								type = 'mantenedorPropuestas.do';
							}
							else if(item === 'traspaso') url = '/cargarParametros.do';
							else if(item === 'cotizador') {
								type = 'cotizadorVida.do';
								cmd = 'Init';
							}

							if(url === '') {
								//Encriptar parametros
								const [
									rutEncrypted, 
									rolEncrypted, 
									cmdEncrypted, 
									branchEncrypted, 
									modulecEncrypted
								] = await Promise.all([
									self.getEncryptedData(rut),
									self.getEncryptedData(rol),
									self.getEncryptedData(cmd),
									self.getEncryptedData(branch),
									self.getEncryptedData(modulec)
								]);
								if(product !== '') product = await self.getEncryptedData(product);

								//Leer data encriptada
								rut = rutEncrypted.data.data;
								rol = rolEncrypted.data.data;
								cmd = cmdEncrypted.data.data;
								branch = branchEncrypted.data.data;
								modulec = modulecEncrypted.data.data;
								product = product.data ? product.data.data : product;

								//Armar URL
								if(item === 'buscar-cotizador') { 
									url = `/${type}?idSesion=${idSesion}&rut=${rut}&rutLogin=${rut}&perfil=${rol}&fechaConexion=1&cmd=${cmd}&branch=${branch}&product=${product}&modulec=${modulec}`;
								} else{
									url = `/${type}?idSesion=${idSesion}&rut=${rut}&perfil=${rol}&fechaConexion=1&cmd=${cmd}&branch=${branch}&product=${product}&modulec=${modulec}`; 
								}
							}
							//Abrir nueva pestaña con URL
							self.loading = false;
							url = url.replace(/\+/g,'%2B');
							//url = encodeURIComponent(url);
							window.open(self.baseUrl + url);
						} else {
							//Mostrar modal de no acceso
							self.loading = false;
							$('#noAccessModal').modal({})
						} 

					} else {
						self.loading = false;
						$('#otherProductsModal').modal({})
					}
				});
			},
			getDate: function() {
				var today = new Date();
				var dd = today.getDate();
				var mm = today.getMonth()+1; 
				var yyyy = today.getFullYear();
				var time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();
				if(dd<10) dd = '0' + dd;
				if(mm<10) mm = '0' + mm;
				var currentDate = `${dd}/${mm}/${yyyy}${time}`;
				return currentDate;
			},
			collapsePropuestas: function() {
				this.propuestasIsCollapsed = $('#propuestasCollapse').is('.collapse:not(.show)');
			}
		}
	}).$mount('#header')
</script>

